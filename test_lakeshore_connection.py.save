import pyvisa
from pyvisa.constants import StopBits, Parity

# Create resource manager
rm = pyvisa.ResourceManager()

# Open the serial port (make sure this matches your system)
try:
    device = rm.open_resource('ASRL/dev/ttyUSB0::INSTR',
				)
    print("Resource Manager Open")
except Exception as e:
    print("Resource Manage failed. \nReason:", e)

# Configure serial parameters
device.baud_rate = 9600
device.data_bits = 8
device.stop_bits = 1.0
device.parity = None
device.write_termination = '\n'
device.read_termination = '\n'
device.timeout = 3000  # milliseconds

# Query the instrument
try:
    idn = device.query("*IDN?")
    print("Instrument ID:", idn)

    # Example: read temperature from input channel A
    temp = device.query("KRDG? A")
    print("Temperature A:", temp.strip())

except Exception as e:
    print("Communication error:", e)

# Clean up
device.close()
